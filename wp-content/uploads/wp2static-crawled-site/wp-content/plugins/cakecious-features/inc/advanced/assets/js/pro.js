(function(){'use strict';window.cakeciousPro={$canvas:document.getElementById('canvas'),$page:document.getElementById('page'),initStickyHeaders:function(){var $desktopSection=document.querySelector('.cakecious-header-main .cakecious-header-sticky'),$mobileSection=document.querySelector('.cakecious-header-mobile .cakecious-header-sticky'),lastScroll=0,lastPageHeight=0,isScrolling=false;var updateSticky=function(e){var $section,config;if(cakeciousConfig.breakpoints.desktop<=window.innerWidth){$section=$desktopSection;config=cakeciousProConfig.stickyHeader;}else{$section=$mobileSection;config=cakeciousProConfig.stickyMobileHeader;}
if(!$section){return;}
if(!config){return;}
if(!cakeciousHelper.isVisible($section)){return;}
if(isScrolling){return;}else{isScrolling=true;}
var pageOffset=cakeciousHelper.getOffset(window.cakeciousPro.$page).top,windowScroll=window.pageYOffset;var $bar=$section.querySelector('.cakecious-section-inner'),barNormalHeight=parseFloat(config.normalHeight),barStickyHeight=parseFloat(config.stickyHeight),barWidth=$section.classList.contains('cakecious-section-contained')?Math.min($section.offsetWidth,parseFloat(config.containedWidth)):$section.offsetWidth,barLeft=cakeciousHelper.getOffset($section).left+(($section.offsetWidth-barWidth)/2),display=config.stickyDisplay,sectionScrollOffset=cakeciousHelper.getOffset($section).top-pageOffset,$logo=$bar.querySelector('.cakecious-sticky-logo'),logoNormalWidth,logoStickyWidth,$logoImage;if($logo){logoNormalWidth=parseFloat(config.logoNormalWidth);logoStickyWidth=parseFloat(config.logoStickyWidth);$logoImage=$logo.querySelector('.cakecious-logo-image');}
switch(display){case 'on-scroll-up':if(lastPageHeight!==window.cakeciousPro.$page.offsetHeight){$section.classList.remove('cakecious-sticky');$section.classList.remove('cakecious-sticky-in-view');$bar.style.cssText='';}
else if(windowScroll>lastScroll){if($section.classList.contains('cakecious-sticky')){$section.classList.remove('cakecious-sticky');$bar.style.top=(lastScroll+pageOffset-cakeciousHelper.getOffset($section).top).toString()+'px';$bar.style.left=0;$bar.style.position='absolute';$bar.style.width='100%';$bar.style.height=barStickyHeight.toString()+'px';if($logoImage){$logoImage.style.width=logoStickyWidth.toString()+'px';}}
if($section.classList.contains('cakecious-sticky-in-view')){if(windowScroll>cakeciousHelper.getOffset($bar).top+barStickyHeight){$section.classList.remove('cakecious-sticky-in-view');}}}
else if(windowScroll<lastScroll){if($section.classList.contains('cakecious-sticky')){if(windowScroll<=sectionScrollOffset){$section.classList.remove('cakecious-sticky');$section.classList.remove('cakecious-sticky-in-view');$bar.style.top=null;$bar.style.left=null;$bar.style.position=null;$bar.style.height=null;$bar.style.width=null;if($logoImage){$logoImage.style.width=null;}}
else if(windowScroll<sectionScrollOffset+(barNormalHeight-barStickyHeight)){var barCurrentHeight=Math.max(barStickyHeight,barNormalHeight-(windowScroll-sectionScrollOffset));$bar.style.height=barCurrentHeight.toString()+'px';if($logoImage){var progress=barNormalHeight!==barStickyHeight?(barNormalHeight-barCurrentHeight)/(barNormalHeight-barStickyHeight):1,logoCurrentWidth=logoNormalWidth-(progress*(logoNormalWidth-logoStickyWidth));$logoImage.style.width=logoCurrentWidth.toString()+'px';}}}
else if($section.classList.contains('cakecious-sticky-in-view')){if(windowScroll<cakeciousHelper.getOffset($bar).top-pageOffset){$section.classList.add('cakecious-sticky');$bar.style.top=pageOffset.toString()+'px';$bar.style.left=barLeft.toString()+'px';$bar.style.position=null;$bar.style.width=barWidth.toString()+'px';$bar.style.height=barStickyHeight.toString()+'px';if($logoImage){$logoImage.style.width=logoStickyWidth.toString()+'px';}}}
else{if(windowScroll>sectionScrollOffset+barNormalHeight){$section.classList.add('cakecious-sticky-in-view');$bar.style.top=(windowScroll-barStickyHeight-sectionScrollOffset).toString()+'px';$bar.style.left=0;$bar.style.position='absolute';$bar.style.width='100%';$bar.style.height=barStickyHeight.toString()+'px';if($logoImage){$logoImage.style.width=logoStickyWidth.toString()+'px';}}}}
break;case 'fixed':if(windowScroll>sectionScrollOffset){var barCurrentHeight=Math.max(barStickyHeight,barNormalHeight-(windowScroll-sectionScrollOffset));$section.classList.add('cakecious-sticky');$section.classList.add('cakecious-sticky-in-view');$bar.style.top=pageOffset.toString()+'px';$bar.style.left=barLeft.toString()+'px';$bar.style.width=barWidth.toString()+'px';$bar.style.height=barCurrentHeight.toString()+'px';if($logoImage){var progress=barNormalHeight!==barStickyHeight?(barNormalHeight-barCurrentHeight)/(barNormalHeight-barStickyHeight):1,logoCurrentWidth=logoNormalWidth-(progress*(logoNormalWidth-logoStickyWidth));$logoImage.style.width=logoCurrentWidth.toString()+'px';}}
else{if($section.classList.contains('cakecious-sticky')){$section.classList.remove('cakecious-sticky');$section.classList.remove('cakecious-sticky-in-view');$bar.style.top=null;$bar.style.height=null;$bar.style.left=null;$bar.style.width=null;if($logoImage){$logoImage.style.width=null;}}}
break;}
lastScroll=windowScroll;lastPageHeight=window.cakeciousPro.$page.offsetHeight;isScrolling=false;};if($desktopSection||$mobileSection){window.addEventListener('resize',updateSticky,false);window.addEventListener('scroll',updateSticky,false);window.addEventListener('load',updateSticky,false);updateSticky();}},initStickySidebar:function(){var $sidebar=document.querySelector('#secondary.cakecious-sidebar-sticky');if(!$sidebar){return;}
var $el=$sidebar.querySelector('.sidebar-inner'),stickySpacingTop=0,stickySpacingBottom=0,anchor='top',lastScroll=0;if('undefined'!==typeof cakeciousProConfig.stickySidebar){stickySpacingTop=parseFloat(cakeciousProConfig.stickySidebar.spacingTop)||0;stickySpacingBottom=parseFloat(cakeciousProConfig.stickySidebar.spacingBottom)||0;anchor=cakeciousProConfig.stickySidebar.anchor||'top';}
var updateSticky=function(e){resetStyles();if(window.innerWidth<cakeciousConfig.breakpoints.desktop){return;}
var yStart,yStop;var pageOffset=cakeciousHelper.getOffset(window.cakeciousPro.$page).top,windowScroll=window.pageYOffset;var totalStickyOffsetTop=pageOffset+stickySpacingTop;if(cakeciousProConfig.stickyHeader){totalStickyOffsetTop=totalStickyOffsetTop+cakeciousProConfig.stickyHeader.stickyHeight;}
$el.style.width=$sidebar.offsetWidth+'px';if(cakeciousHelper.getOffset($el).top+$el.offsetHeight<window.innerHeight){anchor='top';}
switch(anchor){case 'bottom':yStart=cakeciousHelper.getOffset($el).top+$el.offsetHeight-window.innerHeight+stickySpacingBottom;yStop=cakeciousHelper.getOffset($sidebar).top+$sidebar.offsetHeight-window.innerHeight+stickySpacingBottom;console.log(yStart);if(windowScroll>=yStart){$sidebar.classList.add('cakecious-sticky');if(windowScroll>=yStop){$el.style.position='absolute';$el.style.bottom=0;}else{$el.style.position='fixed';$el.style.bottom=stickySpacingBottom+'px';}}else{$sidebar.classList.remove('cakecious-sticky');}
break;case 'top':default:yStart=cakeciousHelper.getOffset($sidebar).top-totalStickyOffsetTop;yStop=cakeciousHelper.getOffset($sidebar).top+$sidebar.offsetHeight-$el.offsetHeight-totalStickyOffsetTop;if(windowScroll>=yStart){$sidebar.classList.add('cakecious-sticky');if(windowScroll>=yStop){$el.style.position='absolute';$el.style.bottom=0;}else{$el.style.position='fixed';$el.style.top=totalStickyOffsetTop+'px';}}else{$sidebar.classList.remove('cakecious-sticky');}
break;}}
var resetStyles=function(){$el.style.position=null;$el.style.width=null;$el.style.top=null;$el.style.bottom=null;}
window.addEventListener('resize',updateSticky,false);window.addEventListener('scroll',updateSticky,false);window.addEventListener('load',updateSticky,false);updateSticky();},initFeaturedPosts:function(){var $featuredPosts=document.getElementById('cakecious-featured-posts');if(!$featuredPosts){return;}
if($featuredPosts.classList.contains('cakecious-featured-posts-tiny-slider')){if('undefined'===typeof tns){return;}
if('undefined'===typeof cakeciousProConfig.blogFeaturedPosts.tinySlider){return;}
var args=JSON.parse(cakeciousProConfig.blogFeaturedPosts.tinySlider);args.container=$featuredPosts.querySelector('.cakecious-featured-posts-list');args.controlsContainer=$featuredPosts.querySelector('.cakecious-featured-posts-navigation');args.nav=false;args.speed=250;args.autoplayButtonOutput=false;var $featuredPostsSlider=tns(args);}},initAll:function(){window.cakeciousPro.initStickyHeaders();window.cakeciousPro.initStickySidebar();window.cakeciousPro.initFeaturedPosts();},}
document.addEventListener('DOMContentLoaded',window.cakeciousPro.initAll,false);})();