(function(){'use strict';if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;}
if(!Element.prototype.closest){Element.prototype.closest=function(s){var el=this;if(!document.documentElement.contains(el)){return null;}
do{if(el.matches(s)){return el;}
el=el.parentElement||el.parentNode;}while(el!==null&&el.nodeType===1);return null;};}
window.cakeciousHelper={getOffset:function($el){if($el instanceof HTMLElement){var rect=$el.getBoundingClientRect();return{top:rect.top+window.pageYOffset,left:rect.left+window.pageXOffset,}}
return{top:null,left:null,};},isVisible:function($el){return $el.offsetWidth>0&&$el.offsetHeight>0;},isRTL:function(){return document.body.classList.contains('rtl');},slideUp:function(target,duration){if(!target)return;duration=(typeof duration!=='undefined')?duration:250;target.style.transitionProperty='height, margin, padding';target.style.transitionDuration=duration+'ms';target.style.height=target.offsetHeight+'px';target.offsetHeight;target.style.overflow='hidden';target.style.height=0;target.style.paddingTop=0;target.style.paddingBottom=0;target.style.marginTop=0;target.style.marginBottom=0;window.setTimeout(function(){target.removeAttribute('style');},duration);},slideDown:function(target,duration){if(!target)return;duration=(typeof duration!=='undefined')?duration:250;target.style.removeProperty('display');var display=window.getComputedStyle(target).display;if(display==='none'){display='block';}
target.style.display=display;var height=target.offsetHeight;target.style.overflow='hidden';target.style.height=0;target.style.paddingTop=0;target.style.paddingBottom=0;target.style.marginTop=0;target.style.marginBottom=0;target.offsetHeight;target.style.transitionProperty='height, margin, padding';target.style.transitionDuration=duration+'ms';target.style.height=height+'px';target.style.removeProperty('padding-top');target.style.removeProperty('padding-bottom');target.style.removeProperty('margin-top');target.style.removeProperty('margin-bottom');window.setTimeout(function(){target.style.removeProperty('height');target.style.removeProperty('overflow');target.style.removeProperty('transition-duration');target.style.removeProperty('transition-property');},duration);},slideToggle:function(target,duration){if(!target)return;duration=(typeof duration!=='undefined')?duration:250;if(window.getComputedStyle(target).display==='none'){return slideDown(target,duration);}else{return slideUp(target,duration);}},}
window.cakecious={initKeyboardAndMouseFocus:function(){document.body.addEventListener('keydown',function(e){document.body.classList.add('using-keyboard');},false);document.body.addEventListener('mousedown',function(e){document.body.classList.remove('using-keyboard');},false);},initDropdownMenuReposition:function(){var anchorSide=window.cakeciousHelper.isRTL()?'left':'right';var calculateSubMenuEdge=function(){var $submenus=Array.prototype.slice.call(document.querySelectorAll('.cakecious-header-section .menu > * > .sub-menu'));$submenus.forEach(function($submenu){var $section=$submenu.closest('.cakecious-header-section'),$menuItem=$submenu.parentElement,$wrapper=$menuItem.closest('.cakecious-wrapper'),$container=$wrapper;if($menuItem.classList.contains('cakecious-mega-menu')&&$menuItem.classList.contains('cakecious-mega-menu-full-width')){$container=$section;}
else if($section.classList.contains('cakecious-section-contained')){$container=$section.querySelector('.cakecious-section-inner');}
$submenu.classList.remove('cakecious-sub-menu-edge');$submenu.style[anchorSide]='';$submenu.style.maxWidth=$container.offsetWidth+'px';var containerEdge=$container.getBoundingClientRect()[anchorSide],submenuEdge=$submenu.getBoundingClientRect()[anchorSide],isSubmenuOverflow=window.cakeciousHelper.isRTL()?submenuEdge<containerEdge:submenuEdge>containerEdge;if(isSubmenuOverflow){$submenu.classList.add('cakecious-sub-menu-edge');$submenu.style[anchorSide]=(window.cakeciousHelper.isRTL()?$container.getBoundingClientRect()[anchorSide]-$wrapper.getBoundingClientRect()[anchorSide]:$wrapper.getBoundingClientRect()[anchorSide]-$container.getBoundingClientRect()[anchorSide])+'px';}
if($menuItem.classList.contains('cakecious-mega-menu')&&$menuItem.classList.contains('cakecious-mega-menu-full-width')){var maxContentWidth=$section.classList.contains('cakecious-section-contained')?$menuItem.closest('.cakecious-section-inner').offsetWidth:$menuItem.closest('.cakecious-wrapper').offsetWidth,sidePadding=($submenu.clientWidth-maxContentWidth)/2;$submenu.style.paddingLeft=(sidePadding-parseFloat(window.getComputedStyle($submenu.firstElementChild,null).getPropertyValue('padding-left')))+'px';$submenu.style.paddingRight=(sidePadding-parseFloat(window.getComputedStyle($submenu.lastElementChild,null).getPropertyValue('padding-left')))+'px';}
$submenu.style.maxHeight=(window.innerHeight-$submenu.getBoundingClientRect().top)+'px';if($menuItem.classList.contains('cakecious-mega-menu')){return;}
var $subsubmenus=Array.prototype.slice.call($submenu.querySelectorAll('.sub-menu'));$subsubmenus.forEach(function($subsubmenu){var subsubmenuEdge=$subsubmenu.getBoundingClientRect().left+(window.cakeciousHelper.isRTL()?0:$subsubmenu.getBoundingClientRect().width),isSubsubmenuOverflow=window.cakeciousHelper.isRTL()?subsubmenuEdge<containerEdge:subsubmenuEdge>containerEdge;$subsubmenu.classList.remove('cakecious-sub-menu-right');if(isSubsubmenuOverflow){$subsubmenu.classList.add('cakecious-sub-menu-right');}
$subsubmenu.style.maxHeight=(window.innerHeight-$subsubmenu.getBoundingClientRect().top)+'px';});});}
window.addEventListener('resize',calculateSubMenuEdge,false);calculateSubMenuEdge();},initMenuAccessibility:function(){var handleMenuFocusUsingKeyboard=function(e){var $this=e.target,$menu=$this.closest('.cakecious-hover-menu'),$current=this;while($current!==$menu){if($current.classList.contains('menu-item')){if($current.classList.contains('focus')){$current.classList.remove('focus');}else{$current.classList.add('focus');}}
$current=$current.parentElement;}}
var $menuLinks=Array.prototype.slice.call(document.querySelectorAll('.cakecious-hover-menu .menu-item > a'));$menuLinks.forEach(function($menuLink){$menuLink.addEventListener('focus',handleMenuFocusUsingKeyboard,true);$menuLink.addEventListener('blur',handleMenuFocusUsingKeyboard,true);});var handleMenuNavigationUsingKeyboard=function(e){var $this=e.target.closest('.cakecious-hover-menu .menu-item > a');if(!$this)return;var key=e.which||e.keyCode;if(37===key){e.preventDefault();if($this.parentElement.previousElementSibling){$this.parentElement.previousElementSibling.firstElementChild.focus();}}
else if(39===key){e.preventDefault();if($this.parentElement.nextElementSibling){$this.parentElement.nextElementSibling.firstElementChild.focus();}}
else if(40===key){e.preventDefault();if($this.nextElementSibling){$this.nextElementSibling.firstElementChild.firstElementChild.focus();}
else if($this.parentElement.nextElementSibling){$this.parentElement.nextElementSibling.firstElementChild.focus();}}
else if(38===key){e.preventDefault();if($this.parentElement.previousElementSibling){$this.parentElement.previousElementSibling.firstElementChild.focus();}
else if($this.parentElement.parentElement.previousElementSibling){$this.parentElement.parentElement.previousElementSibling.focus();}}}
document.addEventListener('keydown',handleMenuNavigationUsingKeyboard,false);},initDoubleTapMobileMenu:function(){var handleMenuOnMobile=function(e){var $this=e.target.closest('.cakecious-hover-menu .menu-item > a');if(!$this)return;var $menuItem=$this.parentElement;if($menuItem.classList.contains('menu-item-has-children')){if($this!==document.activeElement){e.preventDefault();document.activeElement.blur();$this.focus();}}}
document.addEventListener('touchend',handleMenuOnMobile,false);},initClickToggleDropdownMenu:function(){var $clickedToggle=null;var handleSubMenuToggle=function(e){var $this=e.target.closest('.cakecious-header-section .cakecious-toggle-menu .cakecious-sub-menu-toggle');if(!$this)return;e.preventDefault();var $header=document.getElementById('masthead'),$menuItem=$this.parentElement;if($menuItem.classList.contains('focus')){$menuItem.classList.remove('focus');$this.setAttribute('aria-expanded',false);}
else{var $focusedMenuItems=Array.prototype.slice.call($header.querySelectorAll('.menu-item.focus'));$focusedMenuItems.forEach(function($focusedMenuItem){$focusedMenuItem.classList.remove('focus');});$menuItem.classList.add('focus');$this.setAttribute('aria-expanded',true);var $searchBar=$menuItem.querySelector('input[type="search"]');if($searchBar){var $subMenu=$searchBar.closest('.sub-menu');var focusSearchBar=function(){$searchBar.click();$subMenu.removeEventListener('transitionend',focusSearchBar);}
$subMenu.addEventListener('transitionend',focusSearchBar);}
$clickedToggle=$this;}}
document.addEventListener('click',handleSubMenuToggle,false);document.addEventListener('touchend',handleSubMenuToggle,false);var handleSubMenuClose=function(e){if(!e.target.closest('.cakecious-header-section .cakecious-toggle-menu')){var $header=document.getElementById('masthead'),$focusedMenuItems;if($header){var $focusedMenuItems=Array.prototype.slice.call($header.querySelectorAll('.cakecious-toggle-menu .menu-item.focus'));$focusedMenuItems.forEach(function($focusedMenuItem){$focusedMenuItem.classList.remove('focus');$clickedToggle.setAttribute('aria-expanded',false);});}}};document.addEventListener('click',handleSubMenuClose,false);document.addEventListener('touchend',handleSubMenuClose,false);},initAccordionMenu:function(){var handleAccordionMenuToggle=function(e){var $this=e.target.closest('.cakecious-header-section-vertical .cakecious-toggle-menu .cakecious-sub-menu-toggle');if(!$this)return;e.preventDefault();var $menuItem=$this.parentElement,$subMenu=$menuItem.querySelector('.sub-menu');if($menuItem.classList.contains('focus')){window.cakeciousHelper.slideUp($subMenu);$menuItem.classList.remove('focus');var $insideMenuItems=Array.prototype.slice.call($menuItem.querySelectorAll('.menu-item.focus'));$insideMenuItems.forEach(function($insideMenuItem){window.cakeciousHelper.slideUp($insideMenuItem.querySelector('.sub-menu'));$insideMenuItem.classList.remove('focus');});}
else{var $siblingMenuItems=Array.prototype.slice.call($menuItem.parentElement.querySelectorAll('.menu-item.focus'));$siblingMenuItems.forEach(function($siblingMenuItem){window.cakeciousHelper.slideUp($siblingMenuItem.querySelector('.sub-menu'));$siblingMenuItem.classList.remove('focus');});window.cakeciousHelper.slideDown($subMenu);$menuItem.classList.add('focus');}}
document.addEventListener('click',handleAccordionMenuToggle,false);document.addEventListener('touchend',handleAccordionMenuToggle,false);var handleAccordionMenuEmptyHashLink=function(e){var $this=e.target.closest('.cakecious-header-section-vertical .cakecious-toggle-menu .menu-item-has-children > .cakecious-menu-item-link[href="#"]');if(!$this)return;e.preventDefault();var $menuItem=$this.parentElement,$toggle=$menuItem.querySelector('.cakecious-sub-menu-toggle');$toggle.click();}
document.addEventListener('click',handleAccordionMenuEmptyHashLink,false);document.addEventListener('touched',handleAccordionMenuEmptyHashLink,false);},initGlobalPopup:function(){var $clickedToggle=null;var deactivatePopup=function(device){var $activePopups=Array.prototype.slice.call(document.querySelectorAll('.cakecious-popup-active'+(undefined!==device?'.cakecious-hide-on-'+device:'')));$activePopups.forEach(function($activePopup){$clickedToggle.classList.remove('cakecious-popup-toggle-active');$clickedToggle.setAttribute('aria-expanded',false);$activePopup.classList.remove('cakecious-popup-active');document.body.classList.remove('cakecious-has-popup-active');$activePopup.removeAttribute('tabindex');if(document.body.classList.contains('using-keyboard')){$clickedToggle.focus();}});}
var handlePopupToggle=function(e){var $this=e.target.closest('.cakecious-popup-toggle');if(!$this)return;e.preventDefault();var $target=document.querySelector('#'+$this.getAttribute('data-target'));if(!$target)return;if($target.classList.contains('cakecious-popup-active')){deactivatePopup();}else{$this.classList.add('cakecious-popup-toggle-active');$this.setAttribute('aria-expanded',true);$target.classList.add('cakecious-popup-active');document.body.classList.add('cakecious-has-popup-active');setTimeout(function(){$target.setAttribute('tabindex',0);$target.focus();},300);$clickedToggle=$this;}}
document.addEventListener('click',handlePopupToggle,false);document.addEventListener('touchend',handlePopupToggle,false);var handlePopupClose=function(e){if(!e.target.closest('.cakecious-popup-close'))return;e.preventDefault();deactivatePopup();}
document.addEventListener('click',handlePopupClose,false);document.addEventListener('touchend',handlePopupClose,false);var handlePopupEscape=function(e){var key=e.which||e.keyCode;if(document.body.classList.contains('cakecious-has-popup-active')&&27===key){deactivatePopup();}}
document.addEventListener('keydown',handlePopupEscape,false);var handleResponsiveVisibility=function(e){if(document.body.classList.contains('cakecious-has-popup-active')){var device='mobile';if(cakeciousConfig.breakpoints.mobile<=window.innerWidth){device='tablet';}
if(cakeciousConfig.breakpoints.desktop<=window.innerWidth){device='desktop';}
deactivatePopup(device);}}
window.addEventListener('resize',handleResponsiveVisibility,false);var handleHashLinkInsidePopup=function(e){if(!e.target.closest('.cakecious-popup a'))return;var $link=e.target.closest('a');if(''!==$link.hash){var pageURL=(window.location.hostname+'/'+window.location.pathname).replace('/\/$/',''),linkURL=($link.hostname+'/'+$link.pathname).replace('/\/$/','');if(pageURL===linkURL){if(document.body.classList.contains('cakecious-has-popup-active')){deactivatePopup();}}}}
document.addEventListener('click',handleHashLinkInsidePopup,false);document.addEventListener('touchend',handleHashLinkInsidePopup,false);},initScrollToTop:function(){var $scrollToTop=document.querySelector('.cakecious-scroll-to-top');if($scrollToTop){var handleScrollToTop=function(e){if(!e.target.closest('.cakecious-scroll-to-top'))return;e.preventDefault();var $link=e.target.closest('.cakecious-scroll-to-top'),$target=document.getElementById($link.getAttribute('href').replace('#',''));if($target){window.scrollTo({top:$target.getBoundingClientRect().top,behavior:'smooth',});}}
document.addEventListener('click',handleScrollToTop,false);document.addEventListener('touchend',handleScrollToTop,false);if($scrollToTop.classList.contains('cakecious-scroll-to-top-display-sticky')){var checkStickyOffset=function(){if(window.pageYOffset>0.5*window.innerHeight){$scrollToTop.classList.add('cakecious-sticky');}else{$scrollToTop.classList.remove('cakecious-sticky');}}
window.addEventListener('scroll',checkStickyOffset,false);checkStickyOffset();}}},initAll:function(){window.cakecious.initKeyboardAndMouseFocus();window.cakecious.initDropdownMenuReposition();window.cakecious.initMenuAccessibility();window.cakecious.initClickToggleDropdownMenu();window.cakecious.initDoubleTapMobileMenu();window.cakecious.initAccordionMenu();window.cakecious.initGlobalPopup();window.cakecious.initScrollToTop();},}
document.addEventListener('DOMContentLoaded',window.cakecious.initAll,false);})();